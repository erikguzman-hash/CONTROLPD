const fs = require('fs');
const path = require('path');

const envConfigPath = path.join(__dirname, 'public', 'js', 'env-config.js');

const firebaseApiKey = process.env.FIREBASE_API_KEY;
const googleClientId = process.env.GOOGLE_CLIENT_ID;

if (!firebaseApiKey || !googleClientId) {
  console.error('Error: FIREBASE_API_KEY and GOOGLE_CLIENT_ID environment variables must be set.');
  process.exit(1);
}

const content = `
// This file is generated by generate-env-config.js during the build process.
// Do not commit this file to Git.
export const FIREBASE_API_KEY = "${firebaseApiKey}";
export const GOOGLE_CLIENT_ID = "${googleClientId}";
`;

fs.writeFileSync(envConfigPath, content.trim());

console.log('Generated public/js/env-config.js');